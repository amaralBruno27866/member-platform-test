<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Insurance Approval Report - OSOT</title>
  </head>
  <body>
    <div style="font-family: Arial, sans-serif; max-width: 720px; margin: 0 auto; padding: 24px;">
      <h2 style="color: #1e293b; margin-bottom: 12px;">Insurance Report Approval</h2>
      <p style="color: #475569; line-height: 1.6; margin-top: 0;">Hello Administrator,</p>
      <p style="color: #475569; line-height: 1.6;">A new 24-hour insurance sales report is ready for approval. Please review the summary and details below.</p>

      <div style="background-color: #f8fafc; padding: 16px; margin: 20px 0; border-radius: 8px; border: 1px solid #e2e8f0;">
        <h3 style="color: #334155; margin-top: 0; font-size: 16px;">Report Summary</h3>
        <ul style="margin: 0; padding-left: 20px; color: #475569;">
          <li><strong>Report ID:</strong> {{reportId}}</li>
          <li><strong>Period Start:</strong> {{summary.periodStart}}</li>
          <li><strong>Period End:</strong> {{summary.periodEnd}}</li>
          <li><strong>Total Records:</strong> {{summary.totalRecords}}</li>
          <li><strong>Total Premium:</strong> ${{summary.totalPremium}}</li>
          <li><strong>Total Amount:</strong> ${{summary.totalAmount}}</li>
        </ul>
      </div>

      <div style="background-color: #eff6ff; border: 1px solid #bfdbfe; padding: 16px; margin: 20px 0; border-radius: 8px;">
        <h3 style="color: #1e40af; margin-top: 0; font-size: 16px;">Status Breakdown</h3>
        <ul style="margin: 0; padding-left: 20px; color: #475569;">
          <li><strong>Active:</strong> {{summary.countActive}}</li>
          <li><strong>Pending:</strong> {{summary.countPending}}</li>
          <li><strong>Draft:</strong> {{summary.countDraft}}</li>
          <li><strong>Expired:</strong> {{summary.countExpired}}</li>
          <li><strong>Cancelled:</strong> {{summary.countCancelled}}</li>
        </ul>
      </div>

      <div style="margin: 24px 0;">
        <h3 style="color: #334155; margin-bottom: 12px; font-size: 16px;">Detailed Records (24h) - All 30 Fields</h3>
        <p style="color: #64748b; font-size: 13px; margin-bottom: 12px;">
          Complete data for each insurance transaction (scroll horizontally to see all columns).
        </p>
        <div style="overflow-x: auto; border: 1px solid #e2e8f0; border-radius: 8px;">
          <table style="border-collapse: collapse; font-size: 12px; min-width: 2400px;">
            <thead>
              <tr style="background-color: #f1f5f9; color: #334155; text-align: left; position: sticky; top: 0;">
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">ID</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Entity</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Order</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">User</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Certificate</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">First Name</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Last Name</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Email</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Phone</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Type</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Personal/Corp</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Account Group</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Category</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Membership</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Year</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Address 1</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Address 2</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">City</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Province</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Postal Code</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Q1</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Q1 Explain</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Q2</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Q2 Explain</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Q3</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Q3 Explain</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Declaration</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Effective</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Expires</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Ins Type</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Limit</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Premium</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0; border-right: 1px solid #e2e8f0;">Total</th>
                <th style="padding: 8px; border-bottom: 2px solid #e2e8f0;">Status</th>
              </tr>
            </thead>
            <tbody>
              {{#if insurances.length}}
                {{#each insurances}}
                  <tr style="border-bottom: 1px solid #e2e8f0;">
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_insuranceid}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{sponsoring_entity}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_table_order}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_table_account}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_certificate}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_first_name}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_last_name}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_email}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_phone_number}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_personal_corporation}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_account_group}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_category}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_membership}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_membership_year}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_address_1}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_address_2}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_city}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_province}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_postal_code}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_insurance_question_1}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap; max-width: 100px; overflow: hidden; text-overflow: ellipsis;">{{osot_insurance_question_1_explain}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_insurance_question_2}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap; max-width: 100px; overflow: hidden; text-overflow: ellipsis;">{{osot_insurance_question_2_explain}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_insurance_question_3}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap; max-width: 100px; overflow: hidden; text-overflow: ellipsis;">{{osot_insurance_question_3_explain}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_insurance_declaration}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_effective_date}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_expires_date}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">{{osot_insurance_type}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">${{osot_insurance_limit}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">${{osot_insurance_price}}</td>
                    <td style="padding: 8px; color: #475569; border-right: 1px solid #e2e8f0; white-space: nowrap;">${{osot_total}}</td>
                    <td style="padding: 8px; color: #475569;">{{osot_insurance_status_display}}</td>
                  </tr>
                {{/each}}
              {{else}}
                <tr>
                  <td colspan="34" style="padding: 16px; text-align: center; color: #64748b;">No insurance records found for this period.</td>
                </tr>
              {{/if}}
            </tbody>
          </table>
        </div>
      </div>

      <div style="text-align: center; margin: 32px 0;">
        <a href="{{approveUrl}}"
           style="background-color: #16a34a; color: white; padding: 14px 36px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold; font-size: 15px; margin: 0 8px 12px 8px;">
          ✅ Approve Report
        </a>
        <a href="{{rejectUrl}}"
           style="background-color: #dc2626; color: white; padding: 14px 36px; text-decoration: none; border-radius: 8px; display: inline-block; font-weight: bold; font-size: 15px; margin: 0 8px 12px 8px;">
          ❌ Reject Report
        </a>
      </div>

      <p style="text-align: center; color: #64748b; font-size: 13px; margin: 20px 0;">
        Please approve or reject this report. Links expire in {{tokenExpiry}}.
      </p>

      <p style="color: #475569; line-height: 1.6; margin-top: 24px;">
        If you have any questions, please contact the system administrator.
      </p>

      <hr style="margin: 28px 0;" />
      <p style="color: #666; font-size: 12px;">This is an automated message from OSOT Insurance System.</p>
    </div>
  </body>
</html>
